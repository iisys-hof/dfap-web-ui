<!--
  ~ Copyright 2018 Thomas Winkler
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="row">
  <div class="col-6">
    <div *ngIf="saved" class="alert alert-success save-alert text-center"  role="alert">
      <strong>Erfolg – </strong> Daten wurden erfolgreich gespeichert
    </div>
    <div class="card" >
      <h4 class="card-header">Auftragsergänzung</h4>
      <div class="card-body">
        <ng-template #rt let-r="result" let-t="term">
          W{{r.orderingId}}
        </ng-template>

        <label for="typeahead-template">Aufrag auswählen:</label>
        <input id="typeahead-template" type="text" class="form-control" [(ngModel)]="qaOrderSearchModel" [ngbTypeahead]="search" [resultTemplate]="rt"
               [inputFormatter]="formatter" />
        <button type="submit" style="margin-top: 20px;" [disabled]="qaOrderSearchModel === undefined " class="btn btn-primary mb-2" (click)="selectTool()">Auftrag übernehmen</button>
        <hr>
        <div *ngIf="selectedOrder !== undefined">
          <p>Ausgewählter Auftrag ist: <code>W{{selectedOrder?.orderingId}}</code></p>

          <input  type="text" class="form-control" [(ngModel)]="selectedOrder?.tool.variant" >

          <button type="submit" style="margin-top: 20px;" [disabled]="selectedOrder?.tool.variant === null " class="btn btn-primary mb-2" (click)="save()">Übernehmen</button>
        </div>
      </div>

      <div class="card-footer text-muted">
      </div>
    </div>
  </div>
</div>
